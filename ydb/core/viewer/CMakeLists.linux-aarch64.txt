
# This file was generated by the build system used internally in the Yandex monorepo.
# Only simple modifications are allowed (adding source-files to targets, adding simple properties
# like target_include_directories). These modifications will be ported to original
# ya.make files by maintainers. Any complex modifications which can't be ported back to the
# original buildsystem will not be accepted.


add_subdirectory(json)
add_subdirectory(protos)
add_subdirectory(ut)
get_built_tool_path(
  TOOL_rescompiler_bin
  TOOL_rescompiler_dependency
  tools/rescompiler/bin
  rescompiler
)

add_library(ydb-core-viewer)
target_compile_options(ydb-core-viewer PRIVATE
  -DUSE_CURRENT_UDF_ABI_VERSION
)
target_link_libraries(ydb-core-viewer PUBLIC
  contrib-libs-linux-headers
  contrib-libs-cxxsupp
  yutil
  library-cpp-resource
  library-actors-core
  library-actors-helpers
  library-cpp-archive
  cpp-mime-types
  cpp-protobuf-json
  ydb-core-base
  core-blobstorage-base
  blobstorage-vdisk-common
  core-client-server
  ydb-core-external_sources
  core-graph-api
  ydb-core-grpc_services
  core-grpc_services-local_rpc
  ydb-core-health_check
  ydb-core-node_whiteboard
  ydb-core-protos
  ydb-core-scheme
  core-tx-schemeshard
  core-tx-tx_proxy
  ydb-core-util
  core-viewer-json
  core-viewer-protos
  library-persqueue-topic_parser
  api-protos
  lib-deprecated-kicli
  public-lib-json_value
  api-grpc
  cpp-client-ydb_types
)
target_sources(ydb-core-viewer PRIVATE
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/browse_db.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/browse_pq.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/browse.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/counters_hosts.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_acl.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_autocomplete.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_blobindexstat.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_browse.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_bscontrollerinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_bsgroupinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_cluster.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_compute.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_config.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_content.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_counters.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_describe.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_local_rpc.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_getblob.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_graph.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_healthcheck.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_hiveinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_hotkeys.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_labeledcounters.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_metainfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_netinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_nodeinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_nodelist.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_nodes.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_pdiskinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_query.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_render.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_storage.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_sysinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_tabletcounters.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_tabletinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_tenants.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_tenantinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_topicinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_pqconsumerinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_vdisk_req.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_vdiskinfo.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_vdiskstat.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_wb_req.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_whoami.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/log.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/query_autocomplete_helper.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/viewer_request.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/viewer.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_aggregate.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_filter.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_group.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_merge.h
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_handlers_vdisk.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/json_handlers_viewer.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/viewer_request.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/viewer.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/viewer_probes.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_aggregate.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_filter.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/wb_merge.cpp
)

add_global_library_for(ydb-core-viewer.global ydb-core-viewer)
target_compile_options(ydb-core-viewer.global PRIVATE
  -DUSE_CURRENT_UDF_ABI_VERSION
)
target_link_libraries(ydb-core-viewer.global PUBLIC
  contrib-libs-linux-headers
  contrib-libs-cxxsupp
  yutil
  library-cpp-resource
  library-actors-core
  library-actors-helpers
  library-cpp-archive
  cpp-mime-types
  cpp-protobuf-json
  ydb-core-base
  core-blobstorage-base
  blobstorage-vdisk-common
  core-client-server
  ydb-core-external_sources
  core-graph-api
  ydb-core-grpc_services
  core-grpc_services-local_rpc
  ydb-core-health_check
  ydb-core-node_whiteboard
  ydb-core-protos
  ydb-core-scheme
  core-tx-schemeshard
  core-tx-tx_proxy
  ydb-core-util
  core-viewer-json
  core-viewer-protos
  library-persqueue-topic_parser
  api-protos
  lib-deprecated-kicli
  public-lib-json_value
  api-grpc
  cpp-client-ydb_types
)
target_sources(ydb-core-viewer.global PRIVATE
  ${PROJECT_BINARY_DIR}/ydb/core/viewer/1cdc663173c623f6a008fb99b02498f1.cpp
)
resources(ydb-core-viewer.global
  ${PROJECT_BINARY_DIR}/ydb/core/viewer/1cdc663173c623f6a008fb99b02498f1.cpp
  INPUTS
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/index.html
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/viewer.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/jstree.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/style.min.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/throbber.gif
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/32px.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/40px.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/cpu
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/cpu_view.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/disk_cell.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/disk_map.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/index.html
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/man-green.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/man-orange.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/man-red.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/man-yellow.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/net_view.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/network
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/node_group.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/node.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/node_map.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/nodes
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/node_view.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/overview
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/overview.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/pdisk.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/pool_block.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/pool_map.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/runner.html
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/stats.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/storage
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/storage_group.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/storage.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/storage_view.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/tablet_cell.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/tablet_map.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/tenant.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/tenants
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/tenant_view.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/throbber.gif
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/util.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/vdisk.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/viewer.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/v2/viewer.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/css/print.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/css/reset.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/css/screen.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/css/style.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/css/typography.css
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/fonts/DroidSans-Bold.ttf
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/fonts/DroidSans.ttf
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/collapse.gif
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/expand.gif
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/explorer_icons.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/favicon-16x16.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/favicon-32x32.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/favicon.ico
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/logo_small.png
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/images/throbber.gif
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/index.html
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/ca.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/en.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/es.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/fr.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/geo.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/it.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/ja.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/ko-kr.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/pl.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/pt.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/ru.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/tr.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/translator.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lang/zh-cn.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/backbone-min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/es5-shim.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/handlebars-4.0.5.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/highlight.9.1.0.pack.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/highlight.9.1.0.pack_extended.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/jquery-1.8.0.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/jquery.ba-bbq.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/jquery.slideto.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/jquery.wiggle.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/js-yaml.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/jsoneditor.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/lodash.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/marked.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/object-assign-pollyfill.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/sanitize-html.min.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/lib/swagger-oauth.js
  ${PROJECT_SOURCE_DIR}/ydb/core/viewer/content/api/swagger-ui.min.js
  KEYS
  viewer/index.html
  viewer/viewer.js
  viewer/jstree.min.js
  viewer/style.min.css
  viewer/throbber.gif
  viewer/32px.png
  viewer/40px.png
  viewer/v2/cpu
  viewer/v2/cpu_view.js
  viewer/v2/disk_cell.js
  viewer/v2/disk_map.js
  viewer/v2/index.html
  viewer/v2/man-green.png
  viewer/v2/man-orange.png
  viewer/v2/man-red.png
  viewer/v2/man-yellow.png
  viewer/v2/net_view.js
  viewer/v2/network
  viewer/v2/node_group.js
  viewer/v2/node.js
  viewer/v2/node_map.js
  viewer/v2/nodes
  viewer/v2/node_view.js
  viewer/v2/overview
  viewer/v2/overview.js
  viewer/v2/pdisk.js
  viewer/v2/pool_block.js
  viewer/v2/pool_map.js
  viewer/v2/runner.html
  viewer/v2/stats.js
  viewer/v2/storage
  viewer/v2/storage_group.js
  viewer/v2/storage.js
  viewer/v2/storage_view.js
  viewer/v2/tablet_cell.js
  viewer/v2/tablet_map.js
  viewer/v2/tenant.js
  viewer/v2/tenants
  viewer/v2/tenant_view.js
  viewer/v2/throbber.gif
  viewer/v2/util.js
  viewer/v2/vdisk.js
  viewer/v2/viewer.css
  viewer/v2/viewer.js
  viewer/api/css/print.css
  viewer/api/css/reset.css
  viewer/api/css/screen.css
  viewer/api/css/style.css
  viewer/api/css/typography.css
  viewer/api/fonts/DroidSans-Bold.ttf
  viewer/api/fonts/DroidSans.ttf
  viewer/api/images/collapse.gif
  viewer/api/images/expand.gif
  viewer/api/images/explorer_icons.png
  viewer/api/images/favicon-16x16.png
  viewer/api/images/favicon-32x32.png
  viewer/api/images/favicon.ico
  viewer/api/images/logo_small.png
  viewer/api/images/throbber.gif
  viewer/api/index.html
  viewer/api/lang/ca.js
  viewer/api/lang/en.js
  viewer/api/lang/es.js
  viewer/api/lang/fr.js
  viewer/api/lang/geo.js
  viewer/api/lang/it.js
  viewer/api/lang/ja.js
  viewer/api/lang/ko-kr.js
  viewer/api/lang/pl.js
  viewer/api/lang/pt.js
  viewer/api/lang/ru.js
  viewer/api/lang/tr.js
  viewer/api/lang/translator.js
  viewer/api/lang/zh-cn.js
  viewer/api/lib/backbone-min.js
  viewer/api/lib/es5-shim.js
  viewer/api/lib/handlebars-4.0.5.js
  viewer/api/lib/highlight.9.1.0.pack.js
  viewer/api/lib/highlight.9.1.0.pack_extended.js
  viewer/api/lib/jquery-1.8.0.min.js
  viewer/api/lib/jquery.ba-bbq.min.js
  viewer/api/lib/jquery.slideto.min.js
  viewer/api/lib/jquery.wiggle.min.js
  viewer/api/lib/js-yaml.min.js
  viewer/api/lib/jsoneditor.min.js
  viewer/api/lib/lodash.min.js
  viewer/api/lib/marked.js
  viewer/api/lib/object-assign-pollyfill.js
  viewer/api/lib/sanitize-html.min.js
  viewer/api/lib/swagger-oauth.js
  viewer/api/swagger-ui.min.js
)
option(YDB_EMBEDDED_UI_DEV_SNAPSHOT "Use latest dev version of embedded UI git repo" Off)
include(${CMAKE_CURRENT_SOURCE_DIR}/recursive_resources.cmake)

if (YDB_EMBEDDED_UI_DEV_SNAPSHOT)
  find_program(NPM_PATH NAMES npm REQUIRED)

  include(ExternalProject)
  ExternalProject_Add(ydb-embedded-ui-git
    GIT_REPOSITORY https://github.com/ydb-platform/ydb-embedded-ui.git
    GIT_TAG main
    USES_TERMINAL_DOWNLOAD On
    USES_TERMINAL_UPDATE On
    USES_TERMINAL_BUILD On
    CONFIGURE_COMMAND ""
    TEST_COMMAND ""
    INSTALL_COMMAND ""
    BUILD_IN_SOURCE On
    BUILD_COMMAND ${NPM_PATH} ci
    COMMAND       ${NPM_PATH} run build:embedded
  )
  ExternalProject_Get_property(ydb-embedded-ui-git SOURCE_DIR)
  add_gen_resources(ydb-embedded-ui-git ${CMAKE_BINARY_DIR}/ydb/core/viewer/ydb_embedded_ui_monitoring.cpp
    IN_DIR  ${SOURCE_DIR}/build
    PREFIX monitoring
  )

else()
  add_dir_resources(${CMAKE_BINARY_DIR}/ydb/core/viewer/ydb_embedded_ui_monitoring.cpp
    IN_DIR  ${CMAKE_CURRENT_SOURCE_DIR}/monitoring
    PREFIX monitoring
  )
endif()
target_sources(ydb-core-viewer.global PRIVATE
  ${CMAKE_BINARY_DIR}/ydb/core/viewer/ydb_embedded_ui_monitoring.cpp
)

