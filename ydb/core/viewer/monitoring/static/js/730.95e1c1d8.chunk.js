"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[730],{21986:(e,t,n)=>{n.d(t,{J:()=>o});var i=n(68963),s=n(32257),l=n(68330),a=n(88776);const d=(0,n(31580).G)("help-popover"),r=16;function o(e){var t;return i.createElement(l.J,Object.assign({},e,{className:d(null,e.className)}),i.createElement("button",Object.assign({ref:e.buttonRef,type:"button"},e.buttonProps,{className:d("button",null===(t=e.buttonProps)||void 0===t?void 0:t.className)}),i.createElement(a.J,{data:s.Z,size:r})))}},31580:(e,t,n)=>{n.d(t,{G:()=>s});var i=n(5247);(0,i.withNaming)({e:"__",m:"_",v:"_"});const s=(0,i.withNaming)({n:"gc-",e:"__",m:"_",v:"_"})},48857:(e,t,n)=>{n.d(t,{N:()=>Se});var i=n(68963),s=n(21645),l=n(17176),a=n(88776),d=n(20397);const r=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1h5ZM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0Zm6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5h6.5Zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0v-2Z",clipRule:"evenodd"}));var o=n(90966),c=n(89646),u=n(68512),m=n(10288),p=n(48027),I=n(38581),v=n(34505),b=n(24119),f=n(19263),g=n(95097),y=n(77796),h=n(36951);const S=(0,h.Ge)("list-container-view"),x=i.forwardRef((function(e,t){let{as:n="div",role:s="listbox",children:l,id:a,className:d,fixedHeight:r,extraProps:o,qa:c,style:u}=e;return i.createElement(y.k,Object.assign({qa:c,as:n,direction:"column",ref:t,grow:!0,tabIndex:-1,id:a,role:s,style:u,className:S({"fixed-height":r},d)},o),l)})),B=e=>null!==e&&"object"===typeof e&&"data"in e,E=(0,h.Ge)("list-recursive-renderer");function O(e){var t,{id:n,itemSchema:s,list:l}=e,a=(0,g._T)(e,["id","itemSchema","list"]);const d=a.children(n,l.structure.idToFlattenIndex[n]);if(B(s)&&s.children){const e=!l.state.expandedById||!(n in l.state.expandedById)||l.state.expandedById[n];return i.createElement("ul",{style:a.style,className:E(null,a.className),role:"group"},d,e&&Boolean(null===(t=l.structure.groupsState[n])||void 0===t?void 0:t.childrenIds)&&s.children.map(((e,t)=>i.createElement(O,Object.assign({list:l,id:l.structure.groupsState[n].childrenIds[t],itemSchema:e,key:t},a)))))}return d}function w(e){var{containerRef:t,renderItem:n,list:s}=e,l=(0,g._T)(e,["containerRef","renderItem","list"]);return i.createElement(x,Object.assign({ref:t},l),s.structure.items.map(((e,t)=>i.createElement(O,{key:t,itemSchema:e,id:s.structure.rootIds[t],list:s},n))))}const C=e=>{let{list:t,multiple:n}=e;return e=>{let{id:i}=e;t.state.disabledById[i]||(t.state.setActiveItemId(i),t.state.expandedById&&i in t.state.expandedById&&t.state.setExpanded?t.state.setExpanded((e=>Object.assign(Object.assign({},e),{[i]:!e[i]}))):t.state.setSelected((e=>Object.assign(Object.assign({},n?e:{}),{[i]:!n||!e[i]}))))}};var k=n(59926);const j=e=>{let{list:t,index:n,step:i,disabledItems:s={}}=e;const l=t.length;let a=(n+l)%l;for(let d=0;d<l;d+=1){if(t[a]&&!s[a])return a;a=(a+l+i)%l}},N="data-list-item",R={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]},_=(e,t)=>{var n;if(document){const i=(t||document).querySelector(`[${N}="${e}"]`);i&&(null===(n=i.scrollIntoView)||void 0===n||n.call(i,{block:"nearest"}))}};var F=n(46318),P=n(57542);const D=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"}));var z=n(39137),T=n(95216);const L=(0,h.Ge)("list-item-view"),q=e=>{var{children:t,indentation:n=1,className:s}=e,l=(0,g._T)(e,["children","indentation","className"]);return i.createElement(y.k,Object.assign({width:16*n,className:L("slot",s)},l),t)},V=i.forwardRef((function(e,t){var{id:n,as:s,size:l="m",active:d,selected:r,disabled:o,activeOnHover:c,className:u,hasSelectionIcon:p=!0,indentation:I,startSlot:v,subtitle:b,endSlot:f,title:h,height:S,expanded:x,dragging:B,style:E,role:O="option",onClick:w}=e,C=(0,g._T)(e,["id","as","size","active","selected","disabled","activeOnHover","className","hasSelectionIcon","indentation","startSlot","subtitle","endSlot","title","height","expanded","dragging","style","role","onClick"]);const k=s||"div",j="boolean"===typeof x,_=o?void 0:w,V="boolean"===typeof c?c:Boolean(_);return i.createElement(y.k,Object.assign({[N]:n,role:O,"aria-selected":r,onClick:_,className:L({active:B||d,selected:r&&!p,activeOnHover:V,radius:l,dragging:B,clickable:Boolean(_)},(0,T.W)({px:2},u)),style:Object.assign({minHeight:null!==S&&void 0!==S?S:R[l][Number(Boolean(b))]},E),as:k,ref:t,alignItems:"center",gap:"4",justifyContent:"space-between"},C),i.createElement(y.k,{gap:"2",alignItems:"center",grow:!0},p&&i.createElement(q,null,r?i.createElement(a.J,{data:F.Z,size:16,className:(0,z.V)({color:"info"})}):null),(e=>e&&e>=1?i.createElement(q,{indentation:Math.floor(e)}):null)(I),j?i.createElement(a.J,{className:L("icon",(0,z.V)({color:o?"hint":void 0})),data:x?P.Z:D,size:16}):null,v,i.createElement("div",{className:L("main-content")},"string"===typeof h?i.createElement(m.x,{ellipsis:!0,color:o?"hint":void 0,variant:j?"subheader-1":void 0},h):h,"string"===typeof b?i.createElement(m.x,{ellipsis:!0,color:o?"hint":"secondary"},b):b)),f)})),A=(0,h.Ge)("tree-list"),M=e=>{let{qa:t,id:n,size:s="m",className:l,list:a,multiple:d,containerRef:r,renderItem:o,renderContainer:u=w,onItemClick:m,mapItemDataToProps:p}=e;const I=(0,c.u)(),v=null!==n&&void 0!==n?n:I,b=i.useRef(null),f=null!==r&&void 0!==r?r:b,g=i.useMemo((()=>{if(null===m)return;return(e,t)=>{const n={id:e.id,list:a};if(m)null===m||void 0===m||m(n,t);else{C({list:a,multiple:d})(n,t)}}}),[m,a,d]);(e=>{let{containerRef:t,onItemClick:n,enabled:s,list:l}=e;const a=i.useCallback((function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i,s;"number"===typeof e&&l.structure.visibleFlattenIds[e]&&(n&&_(l.structure.visibleFlattenIds[e],null===t||void 0===t?void 0:t.current),null===(s=(i=l.state).setActiveItemId)||void 0===s||s.call(i,l.structure.visibleFlattenIds[e]))}),[l.structure.visibleFlattenIds,l.state,t]),d=i.useCallback((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.preventDefault();const i=l.structure.visibleFlattenIds.findIndex((e=>e===l.state.activeItemId)),s=j({list:l.structure.visibleFlattenIds,index:(i>-1?i:n)+t,step:Math.sign(t),disabledItems:l.state.disabledById});a(s)}),[a,l.state.activeItemId,l.state.disabledById,l.structure.visibleFlattenIds]);i.useLayoutEffect((()=>{const e=null===t||void 0===t?void 0:t.current;if(s||!e)return;const i=e=>{switch(e.key){case k.V.ARROW_DOWN:d(e,1,-1);break;case k.V.ARROW_UP:d(e,-1);break;case k.V.SPACEBAR:case k.V.ENTER:l.state.activeItemId&&!l.state.disabledById[l.state.activeItemId]&&(e.preventDefault(),null===n||void 0===n||n({id:l.state.activeItemId}))}};return e.addEventListener("keydown",i),()=>{e.removeEventListener("keydown",i)}}),[t,s,d,l.state.activeItemId,l.state.disabledById,n])})({containerRef:f,onItemClick:g,list:a});return u({qa:t,id:`list-${v}`,size:s,containerRef:f,className:A(null,l),list:a,renderItem:(e,n,l)=>{const r=(e=>{let{qa:t,list:n,onItemClick:i,mapItemDataToProps:s,size:l="m",multiple:a=!1,id:d}=e;var r;const o=Object.assign(Object.assign(Object.assign({},n.structure.itemsState[d]),n.structure.groupsState[d]),{isLastItem:d===n.structure.visibleFlattenIds[n.structure.visibleFlattenIds.length-1]});let c;n.state.expandedById&&d in n.state.expandedById&&(c=n.state.expandedById[d]);const u=Object.assign({id:d,size:l,expanded:c,active:d===n.state.activeItemId,indentation:o.indentation,disabled:Boolean(null===(r=n.state.disabledById)||void 0===r?void 0:r[d]),selected:Boolean(n.state.selectedById[d]),hasSelectionIcon:Boolean(a)&&!o.childrenIds,onClick:i?e=>i({id:d},e):void 0},s(n.structure.itemsById[d]));return t&&(u.qa=((e,t)=>`${e}-${t}`)(t,d)),{data:n.structure.itemsById[d],props:u,context:o}})({qa:t,id:e,size:s,multiple:d,mapItemDataToProps:p,onItemClick:g,list:a});return o?o({data:r.data,props:r.props,context:r.context,index:n,renderContainerProps:l,list:a}):i.createElement(V,Object.assign({},r.props,l))}})};var J=n(79805);const U=e=>{let{item:t,groupedId:n,getItemId:i}=e,s=n;return"function"===typeof i?s=i(B(t)?t.data:t):t&&"object"===typeof t&&"id"in t&&t.id&&(s=t.id),s},Z=(e,t)=>t?`${t}-${e}`:`${e}`,$=e=>e.split("-");function W(e){let{items:t,expandedById:n,getItemId:s}=e;const l=i.useMemo((()=>function(e){let{items:t,getItemId:n,expandedById:i={}}=e;const s=[],l=(e,t,a,d)=>{const r=Z(a,d),o=U({groupedId:r,item:t,getItemId:n});return d||s.push(o),e.push(o),B(t)&&t.children&&(o in i&&!i[o]||e.push(...t.children.reduce(((e,t,n)=>l(e,t,n,o)),[]))),e},a=t.reduce(((e,t,n)=>l(e,t,n)),[]),d={};for(const[r,o]of a.entries())d[o]=r;return{rootIds:s,visibleFlattenIds:a,idToFlattenIndex:d}}({items:t,expandedById:n,getItemId:s})),[t,n,s]);return l}function G(e){let{items:t,defaultExpandedState:n="expanded",getItemId:i}=e;const s={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},l=e=>{let{item:t,index:a,parentGroupedId:d,parentId:r}=e;const o=Z(a,d),c=U({groupedId:o,item:t,getItemId:i});r&&s.groupsState[r].childrenIds.push(c),s.itemsById[c]=t.data,s.itemsState[c]||(s.itemsState[c]={indentation:0}),"undefined"!==typeof r&&(s.itemsState[c].parentId=r),"undefined"!==typeof t.selected&&(s.initialState.selectedById[c]=t.selected),"undefined"!==typeof t.disabled&&(s.initialState.disabledById[c]=t.disabled),o&&(s.itemsState[c].indentation=$(o).length-1),t.children&&(s.groupsState[c]={childrenIds:[]},s.initialState.expandedById&&("undefined"===typeof t.expanded?s.initialState.expandedById[c]="expanded"===n:s.initialState.expandedById[c]=t.expanded),t.children.forEach(((e,t)=>{l({item:e,index:t,parentGroupedId:o,parentId:c})})))};return t.forEach(((e,t)=>B(e)?l({item:e,index:t}):(e=>{let{item:t,index:n}=e;const l=U({groupedId:String(n),item:t,getItemId:i});s.itemsById[l]=t,s.itemsState[l]||(s.itemsState[l]={indentation:0}),t&&"object"===typeof t&&("selected"in t&&"boolean"===typeof t.selected&&(s.initialState.selectedById[l]=t.selected),"disabled"in t&&"boolean"===typeof t.disabled&&(s.initialState.disabledById[l]=t.disabled))})({item:e,index:t}))),s}const H=e=>{let{items:t,getItemId:n,defaultExpandedState:s="expanded",withExpandedState:l=!0,initialState:a,controlledState:d}=e;const{itemsById:r,groupsState:o,itemsState:c,initialState:u}=function(e){let{items:t,getItemId:n,defaultExpandedState:s}=e;const l=i.useRef(n).current;return i.useMemo((()=>G({items:t,getItemId:l,defaultExpandedState:s})),[l,s,t])}({items:t,getItemId:n,defaultExpandedState:s}),m=(e=>{let{initialState:t,withExpandedState:n}=e;const s=i.useRef(t),l=s.current!==t;s.current=t;const[a,d]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.disabledById)&&void 0!==e?e:{}})),[r,o]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.selectedById)&&void 0!==e?e:{}})),[c,u]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.expandedById)&&void 0!==e?e:{}})),[m,p]=i.useState((()=>null===t||void 0===t?void 0:t.activeItemId));l&&((null===t||void 0===t?void 0:t.disabledById)&&d((e=>Object.assign(Object.assign({},t.disabledById),e))),(null===t||void 0===t?void 0:t.selectedById)&&o((e=>Object.assign(Object.assign({},t.selectedById),e))),(null===t||void 0===t?void 0:t.expandedById)&&u((e=>Object.assign(Object.assign({},t.expandedById),e))),p((e=>null!==e&&void 0!==e?e:null===t||void 0===t?void 0:t.activeItemId)));const I={disabledById:a,selectedById:r,activeItemId:m,setDisabled:d,setSelected:o,setActiveItemId:p};return n&&(I.expandedById=c,I.setExpanded=u),I})({initialState:i.useMemo((()=>({expandedById:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.expandedById),u.expandedById),selectedById:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.selectedById),u.selectedById),disabledById:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.disabledById),u.disabledById)})),[u.disabledById,u.expandedById,u.selectedById,null===a||void 0===a?void 0:a.disabledById,null===a||void 0===a?void 0:a.expandedById,null===a||void 0===a?void 0:a.selectedById]),withExpandedState:l}),{visibleFlattenIds:p,idToFlattenIndex:I,rootIds:v}=W({items:t,expandedById:m.expandedById,getItemId:n});return{state:i.useMemo((()=>d?Object.assign(Object.assign({},m),d):m),[d,m]),structure:{rootIds:v,items:t,visibleFlattenIds:p,idToFlattenIndex:I,itemsById:r,groupsState:o,itemsState:c}}},K=e=>{let{defaultValue:t=[],value:n,onUpdate:s}=e;const[l,a]=i.useState(t),d=null!==n&&void 0!==n?n:l,r=!n;return i.useMemo((()=>{const e=d.reduce(((e,t)=>(e[t]=!0,e)),{});return{value:d,selectedById:e,setSelected:t=>{const n=(e=>Object.entries(e).reduce(((e,t)=>{let[n,i]=t;return i&&e.push(n),e}),[]))("function"===typeof t?t(e):t);r?a(n):null===s||void 0===s||s(n)},setInnerValue:r?a:void 0}}),[s,r,d])},X=(0,h.Ge)("tree-select"),Y=e=>i.createElement(V,Object.assign({},e.props,e.renderContainerProps)),Q=i.forwardRef((function(e,t){let{id:n,qa:s,title:l,placement:a,slotBeforeListBody:d,slotAfterListBody:r,size:o="m",defaultOpen:u,width:m,containerRef:g,className:y,containerClassName:h,popupClassName:S,open:x,multiple:B,popupWidth:E,popupDisablePortal:O,items:w,value:k,defaultValue:j,withExpandedState:N=!0,defaultExpandedState:R="expanded",onClose:_,onOpenChange:F,onUpdate:P,renderControl:D,renderItem:z=Y,renderContainer:T,mapItemDataToProps:L,onFocus:q,onBlur:V,getItemId:A,onItemClick:U}=e;const Z=(0,J.X)(),$=(0,c.u)(),W=null!==n&&void 0!==n?n:$,G=`tree-select-popup-${W}`,Q=i.useRef(null),ee=i.useRef(null),te=i.useRef(null),ne=null!==g&&void 0!==g?g:te,ie=(0,p.c)(t,ee),{toggleOpen:se,open:le}=(0,v.Z)({defaultOpen:u,onClose:_,onOpenChange:F,open:x}),{value:ae,selectedById:de,setSelected:re}=K({value:k,defaultValue:j,onUpdate:P}),oe=H({controlledState:{selectedById:de,setSelected:re},items:w,getItemId:A,defaultExpandedState:R,withExpandedState:N}),ce=i.useMemo((()=>{if(null===U)return;return(e,t)=>{const n={id:e.id,list:oe};if(U)null===U||void 0===U||U(n,t);else{C({list:oe,multiple:B})(n,t);const i=oe.state.expandedById&&e.id in oe.state.expandedById;B||i||se(!1)}}}),[U,oe,B,se]);i.useLayoutEffect((()=>{var e;return le&&(null===(e=ne.current)||void 0===e||e.focus()),()=>oe.state.setActiveItemId(void 0)}),[le]);const ue=i.useCallback((()=>se(!1)),[se]),{focusWithinProps:me}=(0,I.L)({onFocusWithin:q,onBlurWithin:i.useCallback((e=>{null===V||void 0===V||V(e),ue()}),[ue,V])}),pe={list:oe,open:le,toggleOpen:se,clearValue:()=>oe.state.setSelected({}),ref:ie,size:o,value:ae,id:W,activeItemId:oe.state.activeItemId,title:l},Ie=D?D(pe):i.createElement(b.Y,Object.assign({},pe,{selectedOptionsContent:i.Children.toArray(ae.map((e=>L(oe.structure.itemsById[e]).title))).join(", "),view:"normal",pin:"round-round",popupId:G,selectId:W})),ve=Object.assign({},"max"===m&&{width:m}),be={};return"number"===typeof m&&(be.width=m),i.createElement("div",Object.assign({ref:Q},me,{className:X(ve,y),style:be}),Ie,i.createElement(f.h,{ref:Q,className:X("popup",{size:o},S),controlRef:ee,width:E,placement:a,open:le,handleClose:ue,disablePortal:O,mobile:Z,id:G},d,i.createElement(M,{list:oe,size:o,className:X("list",h),qa:s,multiple:B,id:`list-${W}`,containerRef:ne,onItemClick:ce,renderContainer:T,mapItemDataToProps:L,renderItem:null!==z&&void 0!==z?z:Y}),r))}));var ee=n(77264),te=n(57002),ne=n.n(te);function ie(e,t){return!t||"object"!==typeof t||!("title"in t)||"string"!==typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}function se(e){let{items:t,initialFilterValue:n="",filterItem:s,onFilterChange:l,filterItems:a,debounceTimeout:d=300}=e;const r=i.useRef(null),[o,c]=i.useState(n),[u,m]=i.useState(t),[p,I]=i.useState(t),v=i.useCallback(((e,t)=>{if(a)return()=>a(e,t);if(e){const n=s||ie;return()=>function(e,t){const n=(e,i)=>{if(B(i)&&i.children){const s=i.children.reduce(n,[]);s.length?e.push(Object.assign(Object.assign({},i),{data:i.data,children:s})):t(i.data)&&e.push(Object.assign(Object.assign({},i),{data:i.data,children:[]}))}else if(B(i)&&t(i.data)){const{children:t}=i,n=(0,g._T)(i,["children"]);e.push(n)}else!B(i)&&t(i)&&e.push(i);return e};return e.reduce(n,[])}(t,(t=>n(e,t)))}return()=>t}),[s,a]);t!==u&&(I(v(o,t)),m(t));const b=i.useCallback(ne()((e=>I(v(e,t))),d),[I,v,d]),{onFilterUpdate:f,reset:y}=i.useMemo((()=>({reset:()=>{c(n),null===l||void 0===l||l(n),b(n)},onFilterUpdate:e=>{c(e),null===l||void 0===l||l(e),b(e)}})),[b,n,l]);return{filterRef:r,filter:o,reset:y,items:p,onFilterUpdate:f}}var le=n(54973);const ae=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),de=JSON.parse('{"button_apply":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","button_reset":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c","button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),re=(0,le.e)({en:ae,ru:de},"TableColumnSetupInner"),oe=(0,h.Ge)("inner-table-column-setup"),ce=oe("controls"),ue=oe("filter-input"),me=oe("empty-placeholder"),pe={isDragDisabled:!0},Ie=e=>({title:e.title}),ve=(e,t)=>"string"!==typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),be=e=>{const{renderSwitcher:t,popupWidth:n,popupPlacement:p,items:I,onUpdate:v,sortable:b,renderControls:f,className:g,defaultItems:h=I,showResetButton:S,filterable:B,filterPlaceholder:E,filterEmptyMessage:O,filterSettings:w=ve}=e,[C,k]=i.useState(!1),[j,N]=i.useState(b),[R,_]=i.useState(b);b!==R&&(_(b),N(b));const[F,P]=i.useState(I),[D,z]=i.useState(I);I!==D&&(z(I),P(I));const T=se({items:F,filterItem:w,debounceTimeout:0}),L=()=>{const e=F.map((e=>{let{id:t,isSelected:n}=e;return{id:t,isSelected:n}}));v(e),U(!1)},q=()=>i.createElement(l.z,{view:"action",width:"max",onClick:L},re("button_apply")),A="function"===typeof S?S(F):S,M=(e=>{let{onDragEnd:t,renderControls:n}=e;const s=(0,c.u)();return e=>{let{renderItem:l,list:a,containerRef:d,id:r,className:c}=e;const{stickyStartItemIdList:u,sortableItemIdList:m,stickyEndItemIdList:p}=((e,t)=>{let n=0;for(;n!==t.length;n++){const i=e[t[n]];if("left"!==(null===i||void 0===i?void 0:i.sticky)&&"start"!==(null===i||void 0===i?void 0:i.sticky))break}let i=t.length;for(;0!==i;i--){const n=e[t[i-1]];if("right"!==(null===n||void 0===n?void 0:n.sticky)&&"end"!==(null===n||void 0===n?void 0:n.sticky))break}return{stickyStartItemIdList:t.slice(0,n),sortableItemIdList:t.slice(n,i),stickyEndItemIdList:t.slice(i)}})(a.structure.itemsById,a.structure.visibleFlattenIds),I=u.map(((e,t)=>l(e,t,pe))),v=m.map(((e,t)=>l(e,t+u.length))),b=p.map(((e,t)=>l(e,I.length+v.length+t,pe)));return i.createElement(i.Fragment,null,i.createElement(x,{ref:d,id:r,className:c},I,i.createElement(o.Z5,{onDragEnd:t},i.createElement(o.bK,{droppableId:s,renderClone:(e,t,n)=>{const i={provided:e,snapshot:t};return l(a.structure.visibleFlattenIds[n.source.index],n.source.index,i)}},(e=>i.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),v,e.placeholder)))),b),i.createElement("div",{className:ce},n()))}})({onDragEnd:e=>{let{destination:t,source:n}=e;void 0!==(null===t||void 0===t?void 0:t.index)&&(null===t||void 0===t?void 0:t.index)!==n.index&&P((e=>((e,t,n)=>{const i=[...e],[s]=i.splice(t,1);return i.splice(n,0,s),i})(e,n.index,t.index)))},renderControls:()=>f?f({DefaultApplyButton:q,onApply:L}):i.createElement(y.k,{gapRow:1,direction:"column",className:ce},A&&i.createElement(l.z,{onClick:()=>{P(h)},width:"max"},re("button_reset")),i.createElement(q,null))}),J=(e=>t=>{let{data:n,props:s,index:l,renderContainerProps:c}=t;const u=!1===e||!0===(null===c||void 0===c?void 0:c.isDragDisabled),m=u?void 0:i.createElement(a.J,{data:d.Z,size:16}),p=!n.isRequired,I=n.isRequired?i.createElement(a.J,{data:r}):void 0,v=!n.isRequired&&s.selected,b=Object.assign(Object.assign({},s),{selected:v,startSlot:I,hasSelectionIcon:p,endSlot:m});if(u)return i.createElement(V,Object.assign({},b,{key:b.id}));const f=(e,t)=>i.createElement(V,Object.assign({},b,e.draggableProps,e.dragHandleProps,{ref:e.innerRef,dragging:t.isDragging}));return(null===c||void 0===c?void 0:c.provided)&&c.snapshot?f(c.provided,c.snapshot):i.createElement(o._l,{draggableId:s.id,index:l,key:`item-key-${s.id}`,isDragDisabled:u},f)})(j),U=e=>{k(e),!1===e&&(P(I),N(b),T.reset())},Z=i.useMemo((()=>(e=>{const t=[];return e.forEach((e=>{let{id:n,isSelected:i}=e;i&&t.push(n)})),t})(F)),[F]),$=(W=O,()=>i.createElement(m.x,{className:me},W));var W;const G=B?i.createElement(ee.o,{size:"m",view:"clear",placeholder:E,value:T.filter,className:ue,onUpdate:e=>{T.onFilterUpdate(e),N(!e.length)},hasClear:!0}):null,H=T.filter&&!T.items.length?$:M;return i.createElement(Q,{className:oe(null,g),mapItemDataToProps:Ie,multiple:!0,size:"l",open:C,value:Z,items:T.filter?T.items:F,onUpdate:e=>{P((t=>t.map((t=>Object.assign(Object.assign({},t),{isSelected:t.isRequired||e.includes(t.id)})))))},popupWidth:n,onOpenChange:U,placement:p,slotBeforeListBody:G,renderContainer:H,renderControl:e=>{let{toggleOpen:n}=e;const d=(0,u.S)(n);return(null===t||void 0===t?void 0:t({onClick:n,onKeyDown:d}))||i.createElement(l.z,{onClick:n,extraProps:{onKeyDown:d}},i.createElement(a.J,{data:s.Z}),re("button_switcher"))},renderItem:J})},fe=JSON.parse('{"button_switcher":"Columns"}'),ge=JSON.parse('{"button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),ye=(0,le.e)({en:fe,ru:ge},"TableColumnSetup"),he=(0,h.Ge)("table-column-setup"),Se=e=>{const{switcher:t,renderSwitcher:n,disabled:d,popupWidth:r,popupPlacement:o,className:c,items:u,sortable:m=!0,showStatus:p,onUpdate:I}=e,v=u.map((e=>{let{id:t,title:n,required:i,selected:s,sticky:l}=e;return{id:t,title:n,isRequired:i,isSelected:s,sticky:l}}));return i.createElement(be,{items:v,onUpdate:e=>{I(e.map((e=>{let{id:t,isSelected:n}=e;const i=u.find((e=>e.id===t));return{id:t,selected:n,title:null===i||void 0===i?void 0:i.title,required:null===i||void 0===i?void 0:i.required}})))},popupPlacement:o,popupWidth:r,renderSwitcher:e=>(null===n||void 0===n?void 0:n(e))||t||i.createElement(l.z,{disabled:d,onClick:e.onClick},i.createElement(a.J,{data:s.Z}),ye("button_switcher"),(()=>{if(!p)return null;const e=`${u.reduce(((e,t)=>t.selected?e+1:e),0)}/${u.length}`;return i.createElement("span",{className:he("status")},e)})()),sortable:m,className:he(null,c)})}},56829:(e,t,n)=>{n.d(t,{F:()=>s});var i=n(40797);function s(){return(0,i.T)().theme}}}]);