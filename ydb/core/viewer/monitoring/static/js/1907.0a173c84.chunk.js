"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[1907],{41919:(e,t,a)=>{a.d(t,{Q:()=>d});var l=a(39683),s=a(17176),n=a(88776),r=a(24362),o=a(75859);const i=(0,r.cn)("developer-ui-link-button");function d(e){let{href:t,visible:a=!1,className:r}=e;return(0,o.jsx)(s.z,{size:"s",href:t,className:i({visible:a},r),target:"_blank",children:(0,o.jsx)(n.J,{data:l.Z})})}},30832:(e,t,a)=>{a.d(t,{a:()=>o});var l=a(24362),s=a(98366),n=a(75859);const r=(0,l.cn)("ydb-entity-page-title");function o(e){let{entityName:t,status:a,id:l,className:o}=e;return(0,n.jsxs)("div",{className:r(null,o),children:[(0,n.jsx)("span",{className:r("prefix"),children:t}),(0,n.jsx)(s.J,{className:r("icon"),status:a,size:"s"}),l]})}},91816:(e,t,a)=>{a.d(t,{b:()=>u});var l=a(68963),s=a(56711),n=a(24362),r=a(42587),o=a(75859);const i=(0,n.cn)("ydb-info-viewer-skeleton"),d=()=>(0,o.jsxs)("div",{className:i("label"),children:[(0,o.jsx)(s.O,{className:i("label__text")}),(0,o.jsx)("div",{className:i("label__dots")})]}),u=e=>{let{rows:t=8,className:a,delay:n=600}=e;const[u]=(0,r.$)(n);let c=(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(d,{}),(0,o.jsx)(s.O,{className:i("value")})]});return u||(c=null),(0,o.jsx)("div",{className:i(null,a),children:[...new Array(t)].map(((e,t)=>(0,o.jsx)("div",{className:i("row"),children:c},`skeleton-row-${t}`)))})}},89778:(e,t,a)=>{a.d(t,{k:()=>p});var l=a(10502),s=a(92398),n=a(48169),r=a(51688),o=a(99683),i=a(41919),d=a(69214),u=a(27506),c=a(75859);const p=e=>{let{node:t,getNodeRef:a,database:p}=e;if(!t.Host)return(0,c.jsx)("span",{children:"\u2014"});const m=!(0,r.TA)(t);let v;a?v=a(t)+"internal":t.NodeId&&(v=(0,n.wq)(t.NodeId)+"internal");const g=m?(0,s.a3)(t.NodeId,{tenantName:null!==p&&void 0!==p?p:t.TenantName}):void 0,h=v?(0,c.jsx)(i.Q,{href:v}):null;return(0,c.jsx)(o.l,{disabled:!m,content:(0,c.jsx)(u.bP,{data:t}),placement:["top","bottom"],behavior:l.x.Immediate,children:(0,c.jsx)(d.A,{name:t.Host,status:t.SystemState,path:g,hasClipboardButton:!0,additionalControls:h})})}},27174:(e,t,a)=>{a.d(t,{B:()=>p});var l=a(77796),s=a(24362),n=a(50422),r=a(56711),o=a(42587),i=a(75859);const d=e=>{let{delay:t=600,className:a}=e;const[l]=(0,o.$)(t);return l?(0,i.jsx)(r.O,{className:a}):null},u=(0,s.cn)("ydb-page-meta");function c(e){let{items:t,loading:a}=e;return(0,i.jsx)("div",{className:u("info"),children:a?(0,i.jsx)(d,{className:u("skeleton")}):t.filter((e=>Boolean(e))).join("\xa0\xa0\xb7\xa0\xa0")})}function p(e){let{className:t,...a}=e;return(0,i.jsxs)(l.k,{gap:1,alignItems:"center",justifyContent:"space-between",className:u(null,t),children:[(0,i.jsx)(c,{...a}),(0,i.jsx)(n.q,{})]})}},59625:(e,t,a)=>{a.d(t,{y:()=>c});var l=a(17176),s=a(79023),n=a(56350),r=a(30817);const o=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),i=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),d=(0,r.wZ)("ydb-storage-empty-filter",{ru:i,en:o});var u=a(75859);const c=e=>{let{title:t,message:a=d("default_message"),showAll:r=d("default_button_label"),onShowAll:o}=e;return(0,u.jsx)(s.u,{image:(0,u.jsx)(n.Q,{name:"thumbsUp"}),position:"left",title:t,description:a,actions:o&&[(0,u.jsx)(l.z,{onClick:o,children:r},"show-all")]})}},6787:(e,t,a)=>{a.d(t,{n:()=>u});var l=a(2098),s=a(95829),n=a(64782),r=a(77382),o=a(46393),i=a(43817),d=a(75859);function u(e){let{data:t,tableSettings:a,visibleEntities:u,onShowAll:c,sort:p,handleSort:m}=e;const v=(0,o.V)(u);return t.length||u===s.G.all?(0,d.jsx)(l.G,{columnsWidthLSKey:r.Ty,data:t,columns:v,settings:a,emptyDataMessage:(0,i.Z)("empty.default"),sortOrder:p,onSort:m},u):(0,d.jsx)(n.a,{onShowAll:c,visibleEntities:u})}},64782:(e,t,a)=>{a.d(t,{a:()=>o});var l=a(95829),s=a(59625),n=a(43817),r=a(75859);const o=e=>{let t,{visibleEntities:a,onShowAll:o}=e;return a===l.G.space&&(t=(0,n.Z)("empty.out_of_space")),a===l.G.missing&&(t=(0,n.Z)("empty.degraded")),t?(0,r.jsx)(s.y,{title:t,showAll:(0,n.Z)("show_all"),onShowAll:o}):null}},32916:(e,t,a)=>{a.d(t,{k:()=>c});var l=a(2098),s=a(95829),n=a(51688),r=a(64682),o=a(78889),i=a(73790),d=a(20108),u=a(75859);function c(e){let{data:t,tableSettings:a,visibleEntities:c,onShowAll:p,nodesUptimeFilter:m,additionalNodesProps:v,sort:g,handleSort:h,database:b}=e;const y=(0,o.E8)(v,c,b);return t.length||c===s.G.all&&m===n.Uu.All?(0,u.jsx)(l.G,{columnsWidthLSKey:o.Wj,data:t,columns:y,settings:{...a,dynamicRenderType:"variable"},emptyDataMessage:(0,i.Z)("empty.default"),rowClassName:d.q,sortOrder:g,onSort:h},c):(0,u.jsx)(r.r,{visibleEntities:c,nodesUptimeFilter:m,onShowAll:p})}},64682:(e,t,a)=>{a.d(t,{r:()=>i});var l=a(95829),s=a(51688),n=a(59625),r=a(73790),o=a(75859);const i=e=>{let t,{visibleEntities:a,nodesUptimeFilter:i,onShowAll:d}=e;return a===l.G.space&&(t=(0,r.Z)("empty.out_of_space")),a===l.G.missing&&(t=(0,r.Z)("empty.degraded")),i===s.Uu.SmallUptime&&(t=(0,r.Z)("empty.small_uptime")),a!==l.G.all&&i!==s.Uu.All&&(t=(0,r.Z)("empty.several_filters")),t?(0,o.jsx)(n.y,{title:t,showAll:(0,r.Z)("show_all"),onShowAll:d}):null}},78889:(e,t,a)=>{a.d(t,{E8:()=>w,Wj:()=>c});var l=a(19812),s=a(89778),n=a(95829),r=a(52317),o=a(51688),i=a(17931),d=a(20108),u=a(75859);const c="storageNodesColumnsWidth",p="NodeId",m="Host",v="DC",g="Rack",h="Uptime",b="PDisks",y="Missing",w=(e,t,a)=>{const c=((e,t)=>{const a=null===e||void 0===e?void 0:e.getNodeRef;return[{name:p,header:"Node ID",width:100,align:l.ZP.RIGHT,render:e=>{let{row:t}=e;return t.NodeId}},{name:m,header:"Host",width:350,render:e=>{let{row:l}=e;return(0,u.jsx)(s.k,{node:l,getNodeRef:a,database:t})},align:l.ZP.LEFT},{name:v,header:"DC",width:100,render:e=>{let{row:t}=e;return t.DC||r.jX},align:l.ZP.LEFT},{name:g,header:"Rack",width:100,render:e=>{let{row:t}=e;return t.Rack||"\u2014"},align:l.ZP.LEFT},{name:h,header:"Uptime",width:130,sortAccessor:e=>{let{StartTime:t}=e;return t?-t:0},align:l.ZP.RIGHT,render:e=>{let{row:t}=e;return t.Uptime}},{name:y,header:"Missing",width:100,align:l.ZP.CENTER,defaultOrder:l.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.Missing}},{name:b,className:(0,d.b)("pdisks-column"),header:"PDisks",render:e=>{var t;let{row:a}=e;return(0,u.jsx)("div",{className:(0,d.b)("pdisks-wrapper"),children:null===(t=a.PDisks)||void 0===t?void 0:t.map((e=>{var t;const l=null===(t=a.VDisks)||void 0===t?void 0:t.filter((t=>t.PDiskId===e.PDiskId));return(0,u.jsx)("div",{className:(0,d.b)("pdisks-item"),children:(0,u.jsx)(i.l,{data:e,vDisks:l})},e.PDiskId)}))})},align:l.ZP.CENTER,sortable:!1,width:900,resizeable:!1}]})(e,a),w=c.map((e=>({...e,sortable:(0,o.oh)(e.name)})));return t!==n.G.missing?w.filter((e=>e.name!==y)):w}},73790:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(30817);const s=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),n=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),r=(0,l.wZ)("ydb-storage-nodes",{ru:n,en:s})},20108:(e,t,a)=>{a.d(t,{b:()=>n,q:()=>r});var l=a(24362),s=a(51688);const n=(0,l.cn)("global-storage-nodes"),r=e=>n("node",{unavailable:(0,s.TA)(e)})},35953:(e,t,a)=>{a.r(t),a.d(t,{StorageGroupPage:()=>B});var l=a(68963),s=a(8179),n=a(17095),r=a(49352),o=a(52846),i=a(95408),d=a(30832),u=a(26688),c=a(91816),p=a(74170),m=a(27174),v=a(77796),g=a(5922),h=a(34301),b=a(1504),y=a(55850),w=a(69214),N=a(62206),f=a(67359),x=a(30817);const j=JSON.parse('{"encryption":"Encryption","overall":"Overall","disk-space":"Disk Space","media-type":"Media Type","erasure-species":"Erasure Species","used-space":"Used Space","usage":"Usage","read-throughput":"Read Throughput","write-throughput":"Write Throughput","yes":"Yes","no":"No","group-generation":"Group Generation","latency":"Latency","allocation-units":"Units","state":"State","missing-disks":"Missing Disks","available":"Available Space","latency-put-tablet-log":"Latency (Put Tablet Log)","latency-put-user-data":"Latency (Put User Data)","latency-get-fast":"Latency (Get Fast)"}'),D=(0,x.wZ)("storage-group-info",{en:j});var S=a(75859);function E(e){let{data:t,className:a,...l}=e;const{Encryption:s,Overall:n,DiskSpace:r,MediaType:o,ErasureSpecies:i,Used:d,Limit:u,Usage:c,Read:p,Write:m,GroupGeneration:x,Latency:j,AllocationUnits:E,State:k,MissingDisks:Z,Available:_,LatencyPutTabletLog:A,LatencyPutUserData:G,LatencyGetFast:P}=t||{},T=[];(0,g.D)(x)&&T.push({label:D("group-generation"),value:x}),(0,g.D)(i)&&T.push({label:D("erasure-species"),value:i}),(0,g.D)(o)&&T.push({label:D("media-type"),value:o}),(0,g.D)(s)&&T.push({label:D("encryption"),value:D(s?"yes":"no")}),(0,g.D)(n)&&T.push({label:D("overall"),value:(0,S.jsx)(w.A,{status:n})}),(0,g.D)(k)&&T.push({label:D("state"),value:k}),(0,g.D)(Z)&&T.push({label:D("missing-disks"),value:Z});const C=[];return(0,g.D)(d)&&(0,g.D)(u)&&C.push({label:D("used-space"),value:(0,S.jsx)(f.y,{value:Number(d),capacity:Number(u),formatValues:h.q3,colorizeProgress:!0})}),(0,g.D)(_)&&C.push({label:D("available"),value:(0,h.q3)(Number(_))}),(0,g.D)(c)&&C.push({label:D("usage"),value:`${c.toFixed(2)}%`}),(0,g.D)(r)&&C.push({label:D("disk-space"),value:(0,S.jsx)(w.A,{status:r})}),(0,g.D)(j)&&C.push({label:D("latency"),value:(0,S.jsx)(w.A,{status:j})}),(0,g.D)(A)&&C.push({label:D("latency-put-tablet-log"),value:(0,b.zm)(A)}),(0,g.D)(G)&&C.push({label:D("latency-put-user-data"),value:(0,b.zm)(G)}),(0,g.D)(P)&&C.push({label:D("latency-get-fast"),value:(0,b.zm)(P)}),(0,g.D)(E)&&C.push({label:D("allocation-units"),value:E}),(0,g.D)(p)&&C.push({label:D("read-throughput"),value:(0,y.Qt)(Number(p))}),(0,g.D)(m)&&C.push({label:D("write-throughput"),value:(0,y.Qt)(Number(m))}),(0,S.jsxs)(v.k,{className:a,gap:2,direction:"row",wrap:!0,children:[(0,S.jsx)(N._P,{info:T,...l}),(0,S.jsx)(N._P,{info:C,...l})]})}var k=a(54665),Z=a(17880),_=a(79061),A=a(95829),G=a(33058),P=a(75850),T=a(24362),C=a(52317),R=a(17096),U=a(51688),I=a(6787),O=a(32916);const L=JSON.parse('{"storage-group":"Storage Group","group":"Group","nodes":"Nodes","pool-name":"Pool Name"}'),M=(0,x.wZ)("ydb-storage-group-page",{en:L}),F=[{id:A.d.groups,get title(){return M("group")}},{id:A.d.nodes,get title(){return M("nodes")}}],z=(0,T.cn)("ydb-storage-group-page"),q=i.z.nativeEnum(A.d).catch(A.d.groups);function B(){var e,t,a;const i=(0,R.zL)(),[{groupId:v,activeTab:h}]=(0,o.useQueryParams)({groupId:o.StringParam,activeTab:o.StringParam}),b=q.parse(h);l.useEffect((()=>{i((0,_.J)("storageGroup",{groupId:v}))}),[i,v]);const[y]=(0,R.Rj)(),w=(0,Z.tS)(),N=G.y.useGetStorageGroupsInfoQuery((0,g.D)(v)?{groupId:v,shouldUseGroupsHandler:w}:n.CN,{pollingInterval:y}),f=G.y.useGetStorageNodesInfoQuery(v&&b===A.d.nodes?{group_id:v}:n.CN,{pollingInterval:y}),x=null===(e=N.data)||void 0===e||null===(t=e.groups)||void 0===t?void 0:t[0],j=null===(a=f.data)||void 0===a?void 0:a.nodes,D=N.isFetching&&void 0===x;return(0,S.jsxs)("div",{className:z(null),children:[(0,S.jsxs)("div",{className:z("info-content"),children:[(()=>{const e=v?`${M("storage-group")} ${v}`:M("storage-group");return(0,S.jsx)(r.ql,{titleTemplate:`%s - ${e} \u2014 YDB Monitoring`,defaultTitle:`${e} \u2014 YDB Monitoring`})})(),(()=>{if(!v)return null;const e=[`${M("pool-name")}: ${null===x||void 0===x?void 0:x.PoolName}`];return(0,S.jsx)(m.B,{className:z("meta"),loading:D,items:e})})(),(0,S.jsx)(d.a,{className:z("title"),entityName:M("storage-group"),status:(null===x||void 0===x?void 0:x.Overall)||P.K.Grey,id:v}),N.error||f.error?(0,S.jsx)(u.V,{error:N.error||f.error}):null,D?(0,S.jsx)(c.b,{className:z("info"),rows:10}):(0,S.jsx)(E,{data:x,className:z("info")}),(0,S.jsx)("div",{className:z("tabs"),children:(0,S.jsx)(s.m,{size:"l",items:F,activeTab:b,wrapTo:(e,t)=>{let{id:a}=e;const l=v?(0,k.Uu)(v,{activeTab:a}):void 0;return(0,S.jsx)(p.h,{to:l,children:t},a)}})})]}),(0,S.jsx)("div",{className:z("tabs-content"),children:(()=>{switch(b){case"groups":return x?(0,S.jsx)(I.n,{data:[x],tableSettings:C.LE,visibleEntities:"all"}):null;case"nodes":return j?(0,S.jsx)(O.k,{data:j,tableSettings:C.LE,visibleEntities:"all",nodesUptimeFilter:U.Uu.All}):null;default:return null}})()})]})}},57225:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(68963);const s=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 2.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0V5Z",clipRule:"evenodd"}))},67585:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(68963);const s=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 7.75a.75.75 0 0 1 .75.75V11a.75.75 0 0 1-1.5 0V8.5A.75.75 0 0 1 8 7.75Z",clipRule:"evenodd"}))},71549:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(68963);const s=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m3.003 4.702 4.22-2.025a1.796 1.796 0 0 1 1.554 0l4.22 2.025a.886.886 0 0 1 .503.8V6a8.55 8.55 0 0 1-3.941 7.201l-.986.631a1.063 1.063 0 0 1-1.146 0l-.986-.63A8.55 8.55 0 0 1 2.5 6v-.498c0-.341.196-.652.503-.8Zm3.57-3.377L2.354 3.35A2.387 2.387 0 0 0 1 5.502V6a10.05 10.05 0 0 0 4.632 8.465l.986.63a2.563 2.563 0 0 0 2.764 0l.986-.63A10.05 10.05 0 0 0 15 6v-.498c0-.918-.526-1.755-1.354-2.152l-4.22-2.025a3.296 3.296 0 0 0-2.852 0ZM9.5 7a1.5 1.5 0 0 1-.75 1.3v1.95a.75.75 0 0 1-1.5 0V8.3A1.5 1.5 0 1 1 9.5 7Z",clipRule:"evenodd"}))},71586:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(68963);const s=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.836 2.244c.962-1.665 3.366-1.665 4.328 0l4.917 8.505c.964 1.666-.239 3.751-2.164 3.751H3.083c-1.925 0-3.128-2.085-2.164-3.751l4.917-8.505ZM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 1 1-1.5 0v-2A.75.75 0 0 1 8 5Zm1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))},56711:(e,t,a)=>{a.d(t,{O:()=>n});var l=a(68963);const s=(0,a(36951).Ge)("skeleton");function n(e){let{className:t,style:a,qa:n}=e;return l.createElement("div",{className:s(null,t),style:a,"data-qa":n})}},27320:(e,t,a)=>{a.d(t,{u:()=>u});var l=a(68963),s=a(48027),n=a(79004),r=a(44920),o=a(10288);const i=(0,a(36951).Ge)("tooltip"),d=["bottom","top"],u=e=>{const{children:t,content:a,disabled:u,placement:c=d,qa:p,id:m,className:v,style:g,disablePortal:h,contentClassName:b,openDelay:y=1e3,closeDelay:w}=e,[N,f]=l.useState(null),x=(0,n.p)(N,{openDelay:y,closeDelay:w,preventTriggerOnFocus:!0}),j=l.Children.only(t),D=j.ref,S=(0,s.c)(f,D);return l.createElement(l.Fragment,null,l.cloneElement(j,{ref:S}),N?l.createElement(r.G,{id:m,role:"tooltip",className:i(null,v),style:g,open:x&&!u,placement:c,anchorRef:{current:N},disablePortal:h,disableEscapeKeyDown:!0,disableOutsideClick:!0,disableLayer:!0,qa:p},l.createElement("div",{className:i("content",b)},l.createElement(o.x,{variant:"body-short",color:"complementary"},a))):null)}},56829:(e,t,a)=>{a.d(t,{F:()=>s});var l=a(40797);function s(){return(0,l.T)().theme}}}]);